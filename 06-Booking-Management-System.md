# نظام إدارة الحجوزات (Booking Management System)

---

## Executive Summary

يُعد نظام إدارة الحجوزات النظام المركزي الذي يتولى إدارة دورة حياة الحجز بأكملها في منصة حجز الباصات. يبدأ عمل هذا النظام من لحظة اهتمام العميل بالحجز ويستمر حتى إتمام الرحلة أو إلغاء الحجز. يتكامل هذا النظام مع جميع الأنظمة الفرعية الأخرى لضمان تجربة حجز سلسة وموثوقة.

في سياق المنصة اليمنية، يواجه النظام تحديات تشمل التعامل مع أنواع مختلفة من الحجوزات (فردية، جماعية، موسمية)، وإدارة سياسات الإلغاء والاسترداد، وضمان دقة البيانات في بيئة تشغيلية قد تواجه تحديات في الاتصال.

---

## Business Objectives

### الأهداف الاستراتيجية

| الهدف | الوصف | المؤشر |
|-------|-------|--------|
| تبسيط الحجز | جعل عملية الحجز سهلة وسريعة | معدل إتمام الحجز |
| تقليل الإلغاء | تقليل نسبة الإلغاءات | نسبة الإلغاء |
| زيادة القيمة | زيادة متوسط قيمة الحجز | متوسط قيمة التذكرة |
| ضمان الرضا | ضمان رضا العملاء عن الحجز | NPS Score |

### الأهداف التشغيلية

1. **دقة البيانات**: ضمان دقة جميع بيانات الحجز
2. **الكفاءة**: تقليل الوقت المستغرق في إتمام الحجز
3. **الشفافية**: توفير معلومات واضحة في كل مرحلة
4. **المرونة**: دعم أنواع مختلفة من الحجوزات والتعديلات

---

## Scope

### داخل النطاق

```
┌─────────────────────────────────────────────────────────────────┐
│                 نطاق نظام إدارة الحجوزات                          │
├─────────────────────────────────────────────────────────────────┤
│  ✓ إنشاء الحجز (Booking Creation)                               │
│  ✓ إدارة بيانات الحجز (Booking Data Management)                 │
│  ✓ سلة الحجز (Booking Cart)                                     │
│  ✓ إلغاء الحجز (Booking Cancellation)                           │
│  ✓ تعديل الحجز (Booking Modification)                           │
│  ✓ استرداد الحجز (Booking Refund)                               │
│  ✓ حجوزات المجموعات (Group Bookings)                            │
│  ✑ حجوزات العائلات (Family Bookings)                            │
│  ✓ حجوزات ذوي الاحتياجات الخاصة (Special Needs Bookings)        │
│  ✓ سجل الحجوزات (Booking History)                               │
│  ✓ إشعارات الحجز (Booking Notifications)                        │
│  ✓ تذاكر السفر الإلكترونية (E-Tickets)                          │
└─────────────────────────────────────────────────────────────────┘
```

### خارج النطاق

- إدارة الانتظار (Waiting List)
- الترقية التلقائية للمقاعد
- برامج الولاء المدمجة

---

## Detailed Functional Requirements

### FR-BM-001: إنشاء الحجز

| المعرف | المتطلب | الأولوية | التفاصيل |
|--------|---------|----------|----------|
| FR-BM-001-01 | بدء الحجز | حرجة | من صفحة الرحلة |
| FR-BM-001-02 | اختيار المقاعد | حرجة | عبر نظام إدارة المقاعد |
| FR-BM-001-03 | إدخال بيانات الركاب | حرجة | الاسم، الهاتف، إلخ |
| FR-BM-001-04 | إضافة خدمات إضافية | عالية | أمتعة إضافية، إلخ |
| FR-BM-001-05 | مراجعة الحجز | حرجة | عرض ملخص قبل الدفع |
| FR-BM-001-06 | إنشاء رقم حجز | حرجة | معرف فريد للحجز |

### FR-BM-002: بيانات الركاب

| المعرف | المتطلب | الأولوية | التفاصيل |
|--------|---------|----------|----------|
| FR-BM-002-01 | الاسم الكامل | حرجة | كما في الهوية |
| FR-BM-002-02 | رقم الهاتف | حرجة | للتواصل |
| FR-BM-002-03 | رقم الهوية/جواز السفر | حرجة | للرحلات الدولية |
| FR-BM-002-04 | تاريخ الميلاد | عالية | للتصنيف العمري |
| FR-BM-002-05 | الجنس | عالية | للإحصائيات |
| FR-BM-002-06 | احتياجات خاصة | عالية | كرسي متحرك، إلخ |

### FR-BM-003: سلة الحجز

| المعرف | المتطلب | الأولوية | التفاصيل |
|--------|---------|----------|----------|
| FR-BM-003-01 | إضافة لسلة | عالية | حفظ الحجز مؤقتاً |
| FR-BM-003-02 | عرض السلة | عالية | جميع الحجوزات المؤقتة |
| FR-BM-003-03 | تعديل السلة | عالية | تغيير أو إزالة |
| FR-BM-003-04 | صلاحية السلة | عالية | انتهاء بعد فترة |
| FR-BM-003-05 | الدفع من السلة | عالية | إتمام حجوزات متعددة |

### FR-BM-004: إلغاء الحجز

| المعرف | المتطلب | الأولوية | التفاصيل |
|--------|---------|----------|----------|
| FR-BM-004-01 | طلب الإلغاء | حرجة | من قبل العميل |
| FR-BM-004-02 | شروط الإلغاء | حرجة | حسب وقت الإلغاء |
| FR-BM-004-03 | رسوم الإلغاء | حرجة | حساب الرسوم |
| FR-BM-004-04 | تأكيد الإلغاء | حرجة | إشعار للعميل |
| FR-BM-004-05 | إرجاع المقاعد | حرجة | لحالة المتاح |
| FR-BM-004-06 | سجل الإلغاء | عالية | تسجيل السبب |

### FR-BM-005: تعديل الحجز

| المعرف | المتطلب | الأولوية | التفاصيل |
|--------|---------|----------|----------|
| FR-BM-005-01 | تغيير المقعد | عالية | حسب التوفر |
| FR-BM-005-02 | تغيير الرحلة | عالية | نقل لرحلة أخرى |
| FR-BM-005-03 | تغيير بيانات الراكب | عالية | تصحيح البيانات |
| FR-BM-005-04 | شروط التعديل | حرجة | قبل موعد الرحلة |
| FR-BM-005-05 | رسوم التعديل | عالية | إن وجدت |

### FR-BM-006: الاسترداد

| المعرف | المتطلب | الأولوية | التفاصيل |
|--------|---------|----------|----------|
| FR-BM-006-01 | حساب المستحق | حرجة | المبلغ المسترد |
| FR-BM-006-02 | طريقة الاسترداد | حرجة | نفس طريقة الدفع |
| FR-BM-006-03 | وقت الاسترداد | حرجة | حسب السياسة |
| FR-BM-006-04 | تأكيد الاسترداد | حرجة | إشعار للعميل |
| FR-BM-006-05 | سجل الاسترداد | عالية | لأغراض المحاسبة |

### FR-BM-007: حجوزات المجموعات

| المعرف | المتطلب | الأولوية | التفاصيل |
|--------|---------|----------|----------|
| FR-BM-007-01 | حجز مجموعة | عالية | 10+ مقاعد |
| FR-BM-007-02 | خصم المجموعات | عالية | نسبة خصم |
| FR-BM-007-03 | مسؤول المجموعة | عالية | جهة الاتصال |
| FR-BM-007-04 | دفعة جزئية | عالية | دفعة مقدمة |
| FR-BM-007-05 | إلغاء جزئي | عالية | إلغاء بعض المقاعد |

### FR-BM-008: التذاكر الإلكترونية

| المعرف | المتطلب | الأولوية | التفاصيل |
|--------|---------|----------|----------|
| FR-BM-008-01 | إنشاء التذكرة | حرجة | بعد تأكيد الدفع |
| FR-BM-008-02 | رمز QR | حرجة | للتحقق |
| FR-BM-008-03 | رقم التذكرة | حرجة | معرف فريد |
| FR-BM-008-04 | إرسال التذكرة | حرجة | عبر البريد/الواتساب |
| FR-BM-008-05 | إعادة إصدار | عالية | في حالة الفقد |

---

## Non-Functional Requirements

### NFR-BM-001: الأداء

| المعرف | المتطلب | القيمة |
|--------|---------|--------|
| NFR-BM-001-01 | وقت إنشاء الحجز | < 3 ثوانٍ |
| NFR-BM-001-02 | وقت إلغاء الحجز | < 2 ثانية |
| NFR-BM-001-03 | عدد الحجوزات المتزامنة | 5000+ |

### NFR-BM-002: الموثوقية

| المعرف | المتطلب | الأولوية |
|--------|---------|----------|
| NFR-BM-002-01 | عدم فقدان الحجوزات | حرجة |
| NFR-BM-002-02 | سجل كامل للعمليات | حرجة |
| NFR-BM-002-03 | قابلية التدقيق | حرجة |

---

## Use Cases

### UC-BM-001: إتمام حجز

| العنصر | الوصف |
|--------|-------|
| الممثل | العميل |
| الشرط المسبق | اختيار رحلة ومقاعد |
| السيناريو | 1. إدخال بيانات الركاب<br>2. مراجعة الحجز<br>3. إتمام الدفع<br>4. إنشاء التذكرة |
| الشرط النهائي | حجز مؤكد مع تذكرة |

### UC-BM-002: إلغاء حجز

| العنصر | الوصف |
|--------|-------|
| الممثل | العميل |
| الشرط المسبق | وجود حجز مؤكد |
| السيناريو | 1. طلب الإلغاء<br>2. عرض شروط الإلغاء<br>3. تأكيد الإلغاء<br>4. معالجة الاسترداد |
| الشرط النهائي | حجز ملغى مع استرداد |

---

## Actors

| الممثل | الوصف |
|--------|-------|
| العميل | إنشاء وإدارة الحجوزات |
| ممثل المكتب | عرض وإدارة حجوزات المكتب |
| المشرف | مراقبة جميع الحجوزات |
| النظام | المعالجة الآلية |

---

## Workflows

### سير عمل إنشاء الحجز

**المرحلة الأولى: البدء**
- استلام طلب الحجز
- التحقق من توفر المقاعد
- حجز مؤقت للمقاعد

**المرحلة الثانية: جمع البيانات**
- استلام بيانات الركاب
- التحقق من صحة البيانات
- حساب التكلفة الإجمالية

**المرحلة الثالثة: المراجعة**
- عرض ملخص الحجز
- انتظار تأكيد العميل

**المرحلة الرابعة: الدفع**
- توجيه لبوابة الدفع
- انتظار تأكيد الدفع

**المرحلة الخامسة: التأكيد**
- تحويل الحجز لمؤكد
- إنشاء التذكرة
- إرسال الإشعارات

### سير عمل إلغاء الحجز

**المرحلة الأولى: الطلب**
- استلام طلب الإلغاء
- التحقق من صلاحية الإلغاء

**المرحلة الثانية: الحساب**
- حساب رسوم الإلغاء
- حساب المبلغ المسترد

**المرحلة الثالثة: التأكيد**
- تأكيد الإلغاء مع العميل
- معالجة الاسترداد

**المرحلة الرابعة: التحديث**
- إلغاء الحجز
- إرجاع المقاعد
- تحديث السجلات

---

## Data Entities (Conceptual)

| الكيان | الوصف |
|--------|-------|
| Booking | الحجز الرئيسي |
| BookingItem | عناصر الحجز (مقاعد) |
| Passenger | بيانات الراكب |
| BookingStatus | حالة الحجز |
| BookingHistory | سجل تغييرات الحجز |
| Cancellation | بيانات الإلغاء |
| Refund | بيانات الاسترداد |
| ETicket | التذكرة الإلكترونية |

---

## Business Rules

| المعرف | القاعدة |
|--------|--------|
| BR-BM-001 | كل حجز يجب أن يكون له رقم فريد |
| BR-BM-002 | لا يمكن حجز مقعد محجوز |
| BR-BM-003 | يجب إدخال بيانات الراكب قبل الدفع |
| BR-BM-004 | الإلغاء قبل 24 ساعة بدون رسوم |
| BR-BM-005 | الإلغاء في آخر 24 ساعة برسوم 50% |
| BR-BM-006 | لا يمكن إلغاء الحجز بعد انطلاق الرحلة |
| BR-BM-007 | يجب إصدار التذكرة فور تأكيد الدفع |

---

## Edge Cases

| الحالة | الوصف | المعالجة |
|--------|-------|----------|
| EC-BM-001 | فشل الدفع بعد حجز المقاعد | إلغاء الحجز المؤقت |
| EC-BM-002 | إلغاء الرحلة من المكتب | إشعار العملاء واسترداد كامل |
| EC-BM-003 | نسيان بيانات الراكب | السماح بالتعديل قبل الرحلة |
| EC-BM-004 | حجز بنفس البيانات | السماح (للعائلات) |
| EC-BM-005 | عدم حضور الراكب | تسجيل كـ No-Show |

---

## Risk Considerations

| المخطر | الاحتمالية | التأثير | الاستراتيجية |
|--------|-----------|---------|--------------|
| فقدان حجز | منخفض | حرج | نسخ احتياطي |
| إلغاء جماعي | منخفض | عالي | سياسة واضحة |
| نزاع على استرداد | متوسط | متوسط | سجل كامل |

---

## Future Enhancements

| التحسين | الوصف | الأولوية |
|---------|-------|----------|
| FE-BM-001 | قائمة الانتظار | عالية |
| FE-BM-002 | حجز متكرر | متوسطة |
| FE-BM-003 | حجز ذكي بالذكاء الاصطناعي | منخفضة |
| FE-BM-004 | تكامل مع تطبيقات السفر | منخفضة |

---

*تم إعداد هذا الملف بواسطة فريق تحليل الأنظمة - منصة حجز الباصات*
*الإصدار: 1.0*
