# نظام إدارة المسارات والرحلات (Route & Trip Management System)

---

## Executive Summary

يُشكل نظام إدارة المسارات والرحلات القلب النابض لمنصة حجز الباصات، حيث يتولى إدارة دورة حياة الرحلات بأكملها من التخطيط إلى التنفيذ. يوفر هذا النظام البنية التحتية اللازمة لإدارة شبكة النقل المعقدة التي تربط بين محافظات الجمهورية اليمنية وبين اليمن والمملكة العربية السعودية.

في سياق التشغيل الفعلي، يواجه النظام تحديات فريدة تتمثل في تنوع المسارات (داخلية ودولية)، واختلاف أحجام الباصات، وتباين أسعار التذاكر، والحاجة إلى التعامل مع العوامل الموسمية مثل موسم الحج والعمرة. يضمن النظام توفير معلومات دقيقة وفي الوقت الفعلي عن الرحلات المتاحة، مما يُمكّن العملاء من اتخاذ قرارات حجز مستنيرة.

---

## Business Objectives

### الأهداف الاستراتيجية

| الهدف | الوصف | المؤشر |
|-------|-------|--------|
| تغطية شاملة | تغطية جميع المحافظات اليمنية | عدد المسارات النشطة |
| ربط دولي | تسهيل السفر بين اليمن والسعودية | عدد الرحلات الدولية |
| كفاءة التشغيل | تحسين استغلال الباصات | نسبة إشغال الباصات |
| الشفافية | توفير معلومات دقيقة للعملاء | دقة معلومات الرحلات |

### الأهداف التشغيلية

1. **تبسيط إدارة الرحلات**: تمكين المكاتب من إدارة رحلاتها بسهولة
2. **منع التعارض**: تجنب تداخل الرحلات أو الازدحام على المسارات
3. **المرونة**: دعم أنواع مختلفة من الرحلات (يومية، موسمية، خاصة)
4. **التحليل**: توفير بيانات لتحليل الأداء وتحسين العمليات

---

## Scope

### داخل النطاق

```
┌─────────────────────────────────────────────────────────────────┐
│              نطاق نظام إدارة المسارات والرحلات                    │
├─────────────────────────────────────────────────────────────────┤
│  ✓ إدارة المسارات (Route Management)                            │
│  ✓ إدارة الرحلات (Trip Management)                              │
│  ✓ إدارة أنواع الباصات (Bus Type Management)                    │
│  ✓ جدولة الرحلات (Trip Scheduling)                              │
│  ✓ التسعير الديناميكي (Dynamic Pricing)                         │
│  ✓ إدارة التوقفات (Stop Management)                             │
│  ✓ البحث المتقدم عن الرحلات (Advanced Search)                   │
│  ✓ إدارة حالة الرحلات (Trip Status Management)                  │
│  ✓ التنبؤ بالطلب (Demand Forecasting)                           │
│  ✓ التقارير التشغيلية (Operational Reports)                     │
└─────────────────────────────────────────────────────────────────┘
```

### خارج النطاق

- تتبع الباصات الفعلي عبر GPS
- إدارة صيانة الباصات
- إدارة السائقين والطاقم

---

## Detailed Functional Requirements

### FR-RT-001: إدارة المسارات

| المعرف | المتطلب | الأولوية | التفاصيل |
|--------|---------|----------|----------|
| FR-RT-001-01 | تعريف المسار | حرجة | من، إلى، المسافة، المدة |
| FR-RT-001-02 | أنواع المسارات | حرجة | داخلي، دولي |
| FR-RT-001-03 | التوقفات الوسيطة | عالية | نقاط التوقف على المسار |
| FR-RT-001-04 | نقاط الانطلاق/الوصول | حرجة | المحطات الرسمية |
| FR-RT-001-05 | حالة المسار | حرجة | نشط، معطل، قيد الصيانة |
| FR-RT-001-06 | المسارات الشائعة | عالية | تمييز المسارات الأكثر طلباً |

### FR-RT-002: إدارة الرحلات

| المعرف | المتطلب | الأولوية | التفاصيل |
|--------|---------|----------|----------|
| FR-RT-002-01 | إنشاء رحلة | حرجة | تحديد المسار، التاريخ، الوقت |
| FR-RT-002-02 | تعيين الباص | حرجة | ربط الباص بالرحلة |
| FR-RT-002-03 | تحديد السعر | حرجة | السعر الأساسي للتذكرة |
| FR-RT-002-04 | تحديد المقاعد المتاحة | حرجة | عدد المقاعد للبيع |
| FR-RT-002-05 | وقت الانطلاق/الوصول | حرجة | الوقت المتوقع |
| FR-RT-002-06 | حالة الرحلة | حرجة | مجدولة، مفتوحة، مكتملة، ملغاة |
| FR-RT-002-07 | نشر/إخفاء الرحلة | حرجة | التحكم في ظهور الرحلة |

### FR-RT-003: أنواع الباصات

| المعرف | المتطلب | الأولوية | التفاصيل |
|--------|---------|----------|----------|
| FR-RT-003-01 | تعريف نوع الباص | حرجة | اسم، وصف، سعة |
| FR-RT-003-02 | سعة الباص | حرجة | عدد المقاعد الكلي |
| FR-RT-003-03 | ترتيب المقاعد | حرجة | خريطة المقاعد |
| FR-RT-003-04 | مميزات الباص | عالية | تكييف، WiFi، إلخ |
| FR-RT-003-05 | تصنيف الباص | عالية | عادي، فاخر، VIP |

### FR-RT-004: جدولة الرحلات

| المعرف | المتطلب | الأولوية | التفاصيل |
|--------|---------|----------|----------|
| FR-RT-004-01 | جدولة يومية | حرجة | رحلات متكررة يومياً |
| FR-RT-004-02 | جدولة أسبوعية | حرجة | رحلات في أيام محددة |
| FR-RT-004-03 | جدولة موسمية | عالية | رحلات موسم الحج |
| FR-RT-004-04 | رحلات لمرة واحدة | حرجة | رحلات خاصة |
| FR-RT-004-05 | تكرار الجدولة | عالية | نسخ جدول لفترة |
| FR-RT-004-06 | تعديل الجدولة | عالية | تغيير مواعيد |

### FR-RT-005: التسعير

| المعرف | المتطلب | الأولوية | التفاصيل |
|--------|---------|----------|----------|
| FR-RT-005-01 | سعر ثابت | حرجة | سعر ثابت للتذكرة |
| FR-RT-005-02 | تسعير حسب المقعد | عالية | أسعار مختلفة للمقاعد |
| FR-RT-005-03 | تسعير موسمي | عالية | زيادة في المواسم |
| FR-RT-005-04 | تخفيضات | عالية | عروض خاصة |
| FR-RT-005-05 | تسعير ديناميكي | متوسطة | حسب الطلب والعرض |

### FR-RT-006: البحث عن الرحلات

| المعرف | المتطلب | الأولوية | التفاصيل |
|--------|---------|----------|----------|
| FR-RT-006-01 | بحث أساسي | حرجة | من، إلى، التاريخ |
| FR-RT-006-02 | بحث متقدم | عالية | نوع الباص، الوقت، السعر |
| FR-RT-006-03 | فرز النتائج | عالية | حسب السعر، الوقت، التقييم |
| FR-RT-006-04 | تصفية النتائج | عالية | حسب المكتب، نوع الباص |
| FR-RT-006-05 | البحث عن رحلات ذهاب وعودة | حرجة | رحلة الذهاب والإياب |

### FR-RT-007: إدارة حالة الرحلات

| المعرف | المتطلب | الأولوية | التفاصيل |
|--------|---------|----------|----------|
| FR-RT-007-01 | تحديث الحالة | حرجة | تغيير حالة الرحلة |
| FR-RT-007-02 | إلغاء الرحلة | حرجة | مع إشعار العملاء |
| FR-RT-007-03 | تأجيل الرحلة | عالية | مع نقل الحجوزات |
| FR-RT-007-04 | إشعار التغييرات | حرجة | إشعار العملاء بالتغييرات |

---

## Non-Functional Requirements

### NFR-RT-001: الأداء

| المعرف | المتطلب | القيمة |
|--------|---------|--------|
| NFR-RT-001-01 | وقت البحث عن الرحلات | < 2 ثانية |
| NFR-RT-001-02 | وقت تحميل تفاصيل الرحلة | < 1 ثانية |
| NFR-RT-001-03 | عدد الرحلات المتزامنة | 10,000+ |

### NFR-RT-002: الدقة

| المعرف | المتطلب | الأولوية |
|--------|---------|----------|
| NFR-RT-002-01 | دقة معلومات الرحلات | حرجة |
| NFR-RT-002-02 | تحديث فوري للمقاعد المتاحة | حرجة |
| NFR-RT-002-03 | منع الحجز المزدوج | حرجة |

---

## Use Cases

### UC-RT-001: إنشاء رحلة جديدة

| العنصر | الوصف |
|--------|-------|
| الممثل | ممثل المكتب |
| الشرط المسبق | حساب مكتب نشط |
| السيناريو | 1. اختيار المسار<br>2. تحديد التاريخ والوقت<br>3. اختيار الباص<br>4. تحديد السعر<br>5. نشر الرحلة |
| الشرط النهائي | رحلة متاحة للحجز |

### UC-RT-002: البحث عن رحلات

| العنصر | الوصف |
|--------|-------|
| الممثل | العميل |
| الشرط المسبق | متصل بالمنصة |
| السيناريو | 1. إدخال معايير البحث<br>2. عرض النتائج<br>3. تطبيق الفلاتر<br>4. اختيار رحلة |
| الشرط النهائي | قائمة رحلات مطابقة |

---

## Actors

| الممثل | الوصف |
|--------|-------|
| ممثل المكتب | إدارة رحلات المكتب |
| العميل | البحث والحجز |
| المشرف | مراقبة جميع الرحلات |
| النظام | التحديثات الآلية |

---

## Workflows

### سير عمل إنشاء رحلة

**المرحلة الأولى: التخطيط**
- اختيار المسار
- تحديد التاريخ والوقت
- مراجعة الرحلات المجدولة

**المرحلة الثانية: التخصيص**
- اختيار الباص المناسب
- تحديد السعر
- تحديد المقاعد المتاحة

**المرحلة الثالثة: النشر**
- مراجعة جميع التفاصيل
- نشر الرحلة
- متابعة الحجوزات

### سير عمل البحث

**استقبال الطلب**
- استلام معايير البحث
- التحقق من الصحة

**المعالجة**
- البحث في قاعدة البيانات
- تطبيق الفلاتر
- ترتيب النتائج

**الاستجابة**
- تنسيق النتائج
- إرسال للعميل

---

## Data Entities (Conceptual)

| الكيان | الوصف |
|--------|-------|
| Route | المسار (من، إلى) |
| RouteStop | التوقفات على المسار |
| Trip | الرحلة المحددة |
| BusType | نوع الباص |
| Bus | الباص المحدد |
| SeatMap | خريطة مقاعد الباص |
| TripSchedule | جدولة الرحلات |
| TripPrice | أسعار الرحلة |
| TripStatus | حالة الرحلة |

---

## Business Rules

| المعرف | القاعدة |
|--------|--------|
| BR-RT-001 | لا يمكن إنشاء رحلتين بنفس الباص في نفس الوقت |
| BR-RT-002 | يجب أن يكون وقت الوصول بعد وقت الانطلاق |
| BR-RT-003 | لا يمكن نشر رحلة بدون تحديد السعر |
| BR-RT-004 | يجب تحديث حالة الرحلة باستمرار |
| BR-RT-005 | لا يمكن إلغاء رحلة بها حجوزات مدفوعة |
| BR-RT-006 | يجب إشعار العملاء بأي تغيير في الرحلة |

---

## Edge Cases

| الحالة | الوصف | المعالجة |
|--------|-------|----------|
| EC-RT-001 | رحلة بدون حجوزات | إلغاء تلقائي |
| EC-RT-002 | تأخير الرحلة | تحديث الحالة وإشعار العملاء |
| EC-RT-003 | عطل في الباص | نقل الحجوزات لرحلة بديلة |
| EC-RT-004 | طلب على رحلة مكتملة | عرض رحلات بديلة |
| EC-RT-005 | تغيير المسار أثناء الرحلة | تحديث وتتبع |

---

## Risk Considerations

| المخطر | الاحتمالية | التأثير | الاستراتيجية |
|--------|-----------|---------|--------------|
| إلغاء رحلات جماعي | منخفض | عالي | رحلات بديلة |
| عدم دقة المعلومات | متوسط | عالي | تحديث فوري |
| ازدحام المسارات | متوسط | متوسط | جدولة ذكية |

---

## Future Enhancements

| التحسين | الوصف | الأولوية |
|---------|-------|----------|
| FE-RT-001 | تتبع GPS مباشر | عالية |
| FE-RT-002 | تنبؤ بالطلب بالذكاء الاصطناعي | عالية |
| FE-RT-003 | جدولة ذكية | متوسطة |
| FE-RT-004 | تكامل مع حجز الفنادق | منخفضة |

---

*تم إعداد هذا الملف بواسطة يونس العفيف - منصة حجز الباصات*
*الإصدار: 1.0*
